dhcp_role:
  directories:
    - path: "{{ dhcp_dir }}"
      volume: dhcp
  files:
    - src: roles/dhcp/templates/dhcpd.conf.j2
      dest: "{{ dhcp_dir }}/dhcpd.conf"
  docker:
    service:
      name: dhcp
      config_dir: "{{ dhcp_dir }}"
      image: networkboot/dhcpd
      volumes:
        - dhcp:/data
      networks:
        default: false
        extra:
          dhcp0:
            ipv4_address: "{{ dhcp_docker_ip }}"
    networks:
      - name: dhcp0
        subnet: "{{ dhcp_docker_subnet }}"
